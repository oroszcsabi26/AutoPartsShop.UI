<div class="admin-container">
    <h1>üõ†Ô∏è Alkatr√©szek kezel√©se</h1>

    <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>

    <div class="filters">
        <label>V√°lassz aut√≥m√°rk√°t:</label>
        <select [(ngModel)]="selectedBrandId" (change)="loadCarModels()">
          <option [value]="null">-- V√°lassz aut√≥m√°rk√°t --</option>
          <option *ngFor="let brand of carBrands" [value]="brand.id">{{ brand.name }}</option>
        </select>

        <label>V√°lassz aut√≥modellt:</label>
        <select [(ngModel)]="selectedModelId">
          <option [value]="null">-- V√°lassz aut√≥modellt --</option>
          <option *ngFor="let model of carModels" [value]="model.id">{{ model.name }}</option>
        </select>

        <label>V√°lassz alkatr√©sz kateg√≥ri√°t:</label>
        <select [(ngModel)]="selectedCategoryId" (change)="loadParts()">
          <option [value]="null">-- V√°lassz alkatr√©sz kateg√≥ri√°t --</option>
          <option *ngFor="let category of categories" [value]="category.id">{{ category.name }}</option>
        </select>
    </div>

    <div class="add-part">
        <input type="text" [(ngModel)]="newPart.name" placeholder="Alkatr√©sz neve">
        <input type="text" [(ngModel)]="newPart.price" placeholder="√År" pattern="[0-9]*" inputmode="numeric">
        <input type="text" [(ngModel)]="newPart.manufacturer" placeholder="Gy√°rt√≥">
        <input type="text" [(ngModel)]="newPart.side" placeholder="Oldal (pl. Els≈ë, H√°ts√≥)">
        <input type="text" [(ngModel)]="newPart.shape" placeholder="Forma (pl. Kerek)">
        <input type="text" [(ngModel)]="newPart.size" placeholder="M√©ret">
        <input type="text" [(ngModel)]="newPart.type" placeholder="Kivitel">
        <input type="text" [(ngModel)]="newPart.material" placeholder="Anyag">
        <input type="text" [(ngModel)]="newPart.description" placeholder="Le√≠r√°s">
        <input type="text" [(ngModel)]="newPart.quantity" placeholder="Mennyis√©g" inputmode="numeric">
        <button (click)="addPart()">‚ûï Hozz√°ad√°s</button>
    </div>

    <ul class="part-list">
        <li *ngFor="let part of parts">
          
          <!-- Ha √©ppen szerkeszt√©s alatt van -->
          <div *ngIf="editPartId === part.id">
            <input type="text" [(ngModel)]="editPart.name" placeholder="Alkatr√©sz neve">
            <input type="number" [(ngModel)]="editPart.price" placeholder="√År">
      
            <!-- üîΩ IDE j√∂nnek az √∫j mez≈ëk -->
            <input type="text" [(ngModel)]="editPart.manufacturer" placeholder="Gy√°rt√≥">
            <input type="text" [(ngModel)]="editPart.side" placeholder="Oldal">
            <input type="text" [(ngModel)]="editPart.shape" placeholder="Forma">
            <input type="text" [(ngModel)]="editPart.size" placeholder="M√©ret">
            <input type="text" [(ngModel)]="editPart.type" placeholder="Kivitel">
            <input type="text" [(ngModel)]="editPart.material" placeholder="Anyag">
            <input type="text" [(ngModel)]="editPart.description" placeholder="Le√≠r√°s">
            <input type="number" [(ngModel)]="editPart.quantity" placeholder="Mennyis√©g">
      
            <button class="save" (click)="saveEdit()">üíæ Ment√©s</button>
            <button class="delete" (click)="editPartId = null">‚ùå M√©gse</button>
          </div>
      
          <!-- Ha NEM szerkeszt√©s alatt van -->
          <div *ngIf="editPartId !== part.id">
            <strong>{{ part.name }}</strong> - {{ part.price }} Ft
            <button class="edit" (click)="startEdit(part)">‚úèÔ∏è Szerkeszt√©s</button>
            <button class="delete" (click)="openDeleteModal(part)">üóëÔ∏è T√∂rl√©s</button>
          </div>
      
        </li>
      </ul>
      

    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <p>Biztosan t√∂r√∂lni szeretn√©d ezt az alkatr√©szt?</p>
            <button (click)="confirmDelete()">‚úÖ Igen</button>
            <button (click)="closeDeleteModal()">‚ùå M√©gse</button>
        </div>
    </div>
</div>
