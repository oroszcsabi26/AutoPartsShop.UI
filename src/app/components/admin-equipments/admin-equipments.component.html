<div class="admin-container">
  <h1>ğŸ”§ FelszerelÃ©sek kezelÃ©se</h1>

  <!-- KeresÃ©s mezÅ‘ -->
  <div class="search-bar">
    <input
      type="text"
      [(ngModel)]="searchQuery"
      (input)="loadEquipments()"
      placeholder="ğŸ” KeresÃ©s nÃ©v vagy gyÃ¡rtÃ³ alapjÃ¡n..." />
  </div>

  <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>

  <!-- Ãšj felszerelÃ©s hozzÃ¡adÃ¡sa -->
  <div class="add-equipment">
    <input type="text" [(ngModel)]="newEquipment.name" placeholder="NÃ©v">
    <input type="text" [(ngModel)]="newEquipment.manufacturer" placeholder="GyÃ¡rtÃ³">
    <input type="text" [(ngModel)]="newEquipment.size" placeholder="MÃ©ret (opcionÃ¡lis)">
    <input type="text" [(ngModel)]="newEquipment.price" placeholder="Ãr">
    <input type="text" [(ngModel)]="newEquipment.description" placeholder="LeÃ­rÃ¡s (opcionÃ¡lis)" />
    <input type="number" [(ngModel)]="newEquipment.quantity" placeholder="MennyisÃ©g (opcionÃ¡lis)" />
    <input type="text" [(ngModel)]="newEquipment.imageUrl" placeholder="KÃ©p URL (opcionÃ¡lis)" />
    <input type="text" [(ngModel)]="newEquipment.material" placeholder="Anyag (opcionÃ¡lis)" />
    <input type="text" [(ngModel)]="newEquipment.side" placeholder="Oldal (opcionÃ¡lis)" />
    <select [(ngModel)]="newEquipment.equipmentCategoryId">
      <option *ngFor="let category of categories" [value]="category.id">{{ category.name }}</option>
    </select>
    <button (click)="addEquipment()">â• HozzÃ¡adÃ¡s</button>
  </div>

  <!-- FelszerelÃ©sek listÃ¡ja -->
  <ul class="equipment-list">
    <li *ngFor="let equipment of equipments">
      <div *ngIf="editEquipmentId !== equipment.id">
        <strong>{{ equipment.name }}</strong> - {{ equipment.manufacturer }} - {{ equipment.price }} Ft
        <span *ngIf="equipment.size"> ({{ equipment.size }})</span>
        <span class="category-info">KategÃ³ria: {{ equipment.equipmentCategory?.name }}</span>
      </div>

      <!-- SzerkesztÅ‘ mezÅ‘k -->
      <div *ngIf="editEquipmentId === equipment.id">
        <input type="text" [(ngModel)]="editEquipment.name">
        <input type="text" [(ngModel)]="editEquipment.manufacturer">
        <input type="text" [(ngModel)]="editEquipment.size" placeholder="MÃ©ret (opcionÃ¡lis)">
        <input type="text" [(ngModel)]="editEquipment.price">
        <input type="text" [(ngModel)]="editEquipment.description" placeholder="LeÃ­rÃ¡s (opcionÃ¡lis)">
        <input type="number" [(ngModel)]="editEquipment.quantity" placeholder="MennyisÃ©g (opcionÃ¡lis)">
        <input type="text" [(ngModel)]="editEquipment.imageUrl" placeholder="KÃ©p URL (opcionÃ¡lis)">
        <input type="text" [(ngModel)]="editEquipment.material" placeholder="Anyag (opcionÃ¡lis)">
        <input type="text" [(ngModel)]="editEquipment.side" placeholder="Oldal (opcionÃ¡lis)">
        <select [(ngModel)]="editEquipment.equipmentCategoryId">
          <option *ngFor="let category of categories" [value]="category.id">{{ category.name }}</option>
        </select>
      </div>

      <button *ngIf="editEquipmentId !== equipment.id" (click)="startEdit(equipment)">âœï¸ SzerkesztÃ©s</button>
      <button *ngIf="editEquipmentId === equipment.id" (click)="saveEdit()">ğŸ’¾ MentÃ©s</button>
      <button (click)="openDeleteModal(equipment)">ğŸ—‘ï¸ TÃ¶rlÃ©s</button>
    </li>
  </ul>

  <!-- TÃ¶rlÃ©s megerÅ‘sÃ­tÅ‘ modal -->
  <div id="deleteModal" class="modal">
    <div class="modal-content">
      <p>Biztosan tÃ¶rÃ¶lni szeretnÃ©d ezt a felszerelÃ©st?</p>
      <button (click)="confirmDelete()">âœ… Igen</button>
      <button (click)="closeDeleteModal()">âŒ MÃ©gse</button>
    </div>
  </div>
</div>
