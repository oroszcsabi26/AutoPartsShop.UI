<!-- Alkatr√©szek keres√©se -->
<div class="part-search-container"> 
  <h2>Alkatr√©szek keres√©se</h2>

  <input 
    type="text" 
    [(ngModel)]="searchQuery" 
    (keyup.enter)="searchParts()" 
    placeholder="√çrd be az alkatr√©sz nev√©t..." 
  />
  <button (click)="searchParts()">Keres√©s</button>

  <!-- Keres√©si tal√°latok (Alkatr√©szek) -->
  <div class="results-container" *ngIf="parts.length > 0">
    <h3>Tal√°latok</h3>
    <ul>
      <li *ngFor="let part of parts" class="part-item">
        <div class="part-info">
          <!-- Gy√°rt√≥ + n√©v -->
          <span class="part-name">{{ part.manufacturer }} {{ part.name }}
            <i class="bi bi-camera" role="button"
            (click)="openImageModal('http://localhost:5214' + part.imageUrl)"
            *ngIf="part.imageUrl"
            title="K√©p megtekint√©se"
            style="margin-left: 10px; color: #007bff; cursor: pointer;">
            </i>       
          </span>

          <!-- √År -->
          <span class="part-price">{{ part.price | currency:'HUF' }}</span>

          <!-- Tov√°bbi jellemz≈ëk -->
          <div class="part-details" *ngIf="part.side || part.shape || part.size || part.type || part.material || part.description">
            <small *ngIf="part.side">Oldal: {{ part.side }}</small><br />
            <small *ngIf="part.shape">Forma: {{ part.shape }}</small><br />
            <small *ngIf="part.size">M√©ret: {{ part.size }}</small><br />
            <small *ngIf="part.type">Kivitel: {{ part.type }}</small><br />
            <small *ngIf="part.material">Anyag: {{ part.material }}</small><br />
            <small *ngIf="part.description">Le√≠r√°s: {{ part.description }}</small>
          </div>
        </div>

        <!-- Mennyis√©g √©s kos√°r -->
        <div class="quantity-controls">
          <button class="quantity-btn" (click)="decreaseQuantity(part)">‚ûñ</button>
          <span class="quantity-value">{{ part.quantity }}</span>
          <button class="quantity-btn" (click)="increaseQuantity(part)">‚ûï</button>
        </div>

        <button class="cart-button" (click)="addToCart(part)">üõí Kos√°rba</button>
      </li>
    </ul>
  </div>
    <p *ngIf="parts.length === 0" class="no-results">Nincsenek tal√°latok.</p>
</div>

<div class="search-separator"></div>

<!-- Felszerel√©si cikkek keres√©se -->
<div class="part-search-container">
  <h2>Felszerel√©si cikkek keres√©se</h2>

  <label for="equipmentCategory">Kateg√≥ria:</label>
  <select id="equipmentCategory" [(ngModel)]="selectedEquipmentCategoryId">
    <option *ngFor="let category of equipmentCategories" [value]="category.id">
      {{ category.name }}
    </option>
  </select>

  <input 
    type="text" 
    [(ngModel)]="equipmentSearchQuery" 
    (keyup.enter)="searchEquipments()" 
    placeholder="√çrd be a felszerel√©si cikk nev√©t..." 
  />
  <button (click)="searchEquipments()">Keres√©s</button>

<!-- Visszajelz√©s az elem hozz√°ad√°s√°r√≥l -->
<div *ngIf="showSuccessMessage" class="success-message">
  ‚úÖ A term√©k sikeresen hozz√°ad√°sra ker√ºlt a kos√°rhoz!
</div>

  <!-- Keres√©si tal√°latok (Felszerel√©si cikkek) -->
  <div class="results-container" *ngIf="equipments.length > 0">
    <h3>Tal√°latok</h3>
    <ul>
      <li *ngFor="let equipment of equipments" class="part-item">
        <div class="part-info">
          <span class="part-name">{{ equipment.manufacturer }} {{ equipment.name }}
            <i class="bi bi-camera" role="button"
              (click)="openImageModal('http://localhost:5214' + equipment.imageUrl)"
              *ngIf="equipment.imageUrl"
              title="K√©p megtekint√©se"
              style="margin-left: 10px; color: #007bff; cursor: pointer;">
            </i>
          </span>
          <span class="part-price">{{ equipment.price | currency:'HUF' }}</span>
          <div class="part-details">
            <small *ngIf="equipment.description">Le√≠r√°s: {{ equipment.description }}</small><br />
            <small *ngIf="equipment.material">Anyag: {{ equipment.material }}</small><br />
            <small *ngIf="equipment.side">Oldal: {{ equipment.side }}</small><br />
            <small *ngIf="equipment.quantity !== undefined">Mennyis√©g: {{ equipment.quantity }}</small>
          </div>
        </div>

        <div class="quantity-controls">
          <button class="quantity-btn" (click)="decreaseQuantity(equipment)">‚ûñ</button>
          <span class="quantity-value">{{ equipment.quantity }}</span>
          <button class="quantity-btn" (click)="increaseQuantity(equipment)">‚ûï</button>
        </div>

        <button class="cart-button" (click)="addToCart(equipment)">üõí Kos√°rba</button>
      </li>
    </ul>
  </div>

  <!-- Bootstrap Modal: Term√©kk√©p megjelen√≠t√©se -->
  <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="imageModalLabel">Term√©kk√©p</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Bez√°r√°s"></button>
        </div>
        <div class="modal-body text-center">
          <img [src]="selectedImageUrl" class="img-fluid" alt="Term√©kk√©p">
        </div>
      </div>
    </div>
  </div>
</div>
